# ShareHub Database Documentation

## ðŸ“Š Database Overview
**Database Name:** sharehub  
**Type:** MySQL 8.0  
**Character Set:** utf8mb4_unicode_ci  
**Total Tables:** 6

---

## ðŸ“‹ Table Details

### 1. Users Table
**Purpose:** Stores user and NGO account information

| Column | Type | Description |
|--------|------|-------------|
| id | INT | Primary key |
| name | VARCHAR(100) | User's full name |
| email | VARCHAR(150) | Unique email (login credential) |
| password_hash | VARCHAR(255) | Bcrypt hashed password |
| phone | VARCHAR(20) | Contact number |
| role | ENUM | 'user' or 'ngo' |
| address | TEXT | Full address |
| latitude | DECIMAL(10,8) | Location coordinate |
| longitude | DECIMAL(11,8) | Location coordinate |
| created_at | TIMESTAMP | Account creation time |
| updated_at | TIMESTAMP | Last update time |

**Indexes:**
- Primary: id
- Unique: email
- Index: role, location (lat, lng)

**Sample Data:** 5 users (3 regular, 1 NGO)

---

### 2. Items Table
**Purpose:** Stores all items listed for sell/donate/swap

| Column | Type | Description |
|--------|------|-------------|
| id | INT | Primary key |
| user_id | INT | Foreign key to users |
| title | VARCHAR(200) | Item title/name |
| description | TEXT | Detailed description |
| category | ENUM | 'clothes', 'books', 'ration' |
| listing_type | ENUM | 'sell', 'donate', 'swap' |
| price | DECIMAL(10,2) | Price (0 for donate/swap) |
| item_condition | ENUM | 'new', 'like_new', 'good', 'fair' |
| address | TEXT | Item location |
| latitude | DECIMAL(10,8) | Location coordinate |
| longitude | DECIMAL(11,8) | Location coordinate |
| status | ENUM | 'available', 'pending', 'completed' |
| created_at | TIMESTAMP | Listing creation time |
| updated_at | TIMESTAMP | Last update time |

**Relationships:**
- user_id â†’ users(id) CASCADE DELETE

**Indexes:**
- Primary: id
- Foreign: user_id
- Index: category, listing_type, status, location

**Sample Data:** 10 items across all categories

---

### 3. Item_Images Table
**Purpose:** Stores multiple images per item

| Column | Type | Description |
|--------|------|-------------|
| id | INT | Primary key |
| item_id | INT | Foreign key to items |
| image_url | VARCHAR(500) | Image file path |
| is_primary | BOOLEAN | Main display image |
| uploaded_at | TIMESTAMP | Upload time |

**Relationships:**
- item_id â†’ items(id) CASCADE DELETE

**Sample Data:** 13 images (1-3 per item)

---

### 4. Transactions Table
**Purpose:** Tracks completed and pending transactions

| Column | Type | Description |
|--------|------|-------------|
| id | INT | Primary key |
| item_id | INT | Foreign key to items |
| seller_id | INT | Foreign key to users (seller) |
| buyer_id | INT | Foreign key to users (buyer) |
| transaction_type | ENUM | 'sell', 'donate', 'swap' |
| amount | DECIMAL(10,2) | Transaction amount |
| status | ENUM | 'pending', 'completed', 'cancelled' |
| created_at | TIMESTAMP | Transaction start time |
| completed_at | TIMESTAMP | Completion time (nullable) |

**Relationships:**
- item_id â†’ items(id) CASCADE DELETE
- seller_id â†’ users(id) CASCADE DELETE
- buyer_id â†’ users(id) CASCADE DELETE

**Sample Data:** 2 transactions (1 pending, 1 completed)

---

### 5. Messages Table
**Purpose:** Enables user-to-user communication

| Column | Type | Description |
|--------|------|-------------|
| id | INT | Primary key |
| sender_id | INT | Foreign key to users |
| receiver_id | INT | Foreign key to users |
| item_id | INT | Foreign key to items (nullable) |
| message_text | TEXT | Message content |
| is_read | BOOLEAN | Read status |
| created_at | TIMESTAMP | Message time |

**Relationships:**
- sender_id â†’ users(id) CASCADE DELETE
- receiver_id â†’ users(id) CASCADE DELETE
- item_id â†’ items(id) SET NULL (optional)

**Sample Data:** 8 messages (conversations between users)

---

### 6. NGO_Verifications Table
**Purpose:** Manages NGO verification process

| Column | Type | Description |
|--------|------|-------------|
| id | INT | Primary key |
| user_id | INT | Foreign key to users |
| ngo_name | VARCHAR(200) | Official NGO name |
| registration_number | VARCHAR(100) | Unique registration ID |
| verification_status | ENUM | 'pending', 'verified', 'rejected' |
| documents_url | VARCHAR(500) | Verification documents path |
| verified_at | TIMESTAMP | Verification time (nullable) |
| created_at | TIMESTAMP | Request time |

**Relationships:**
- user_id â†’ users(id) CASCADE DELETE

**Sample Data:** 1 verified NGO

---

## ðŸ”— Entity Relationship Diagram (Text Format)
```
users (1) â”€â”€â”€â”€â”€â”€< (many) items
  â”‚                   â”‚
  â”‚                   â””â”€â”€â”€â”€< (many) item_images
  â”‚
  â”œâ”€â”€â”€â”€â”€â”€< (many) transactions (as seller)
  â”œâ”€â”€â”€â”€â”€â”€< (many) transactions (as buyer)
  â”œâ”€â”€â”€â”€â”€â”€< (many) messages (as sender)
  â”œâ”€â”€â”€â”€â”€â”€< (many) messages (as receiver)
  â””â”€â”€â”€â”€â”€â”€< (1) ngo_verifications
```

---

## ðŸ“Š Database Statistics

| Metric | Count |
|--------|-------|
| Total Tables | 6 |
| Total Columns | 58 |
| Foreign Keys | 10 |
| Indexes | 25 |
| Sample Users | 5 |
| Sample Items | 10 |
| Sample Images | 13 |
| Sample Messages | 8 |
| Sample Transactions | 2 |

---

## ðŸŽ¯ Design Decisions

### Why 3-Tier Architecture?
- **Data Tier (This):** Only stores data, no business logic
- **Application Tier (Backend):** Will handle business rules
- **Presentation Tier (Frontend):** Will display data to users

### Normalization
- Database is in **3rd Normal Form (3NF)**
- No redundant data
- Proper relationships using foreign keys
- Efficient querying with indexes

### Performance Optimization
- Indexes on frequently queried columns (email, category, status)
- Location-based indexes for nearby search
- Proper data types (DECIMAL for money, ENUM for fixed values)

### Security Considerations
- Passwords stored as bcrypt hashes (never plain text)
- Foreign keys ensure data integrity
- CASCADE DELETE prevents orphaned records

---

## ðŸš€ Usage Instructions

### Setup
1. Start XAMPP (Apache + MySQL)
2. Open phpMyAdmin: http://localhost/phpmyadmin
3. Import schema.sql (creates tables)
4. Import seed.sql (adds sample data)

### Verification Queries

**Check all tables:**
```sql
SHOW TABLES;
```

**Count users:**
```sql
SELECT COUNT(*) FROM users;
```

**Get all available items:**
```sql
SELECT * FROM items WHERE status = 'available';
```

**Get items with user details:**
```sql
SELECT items.*, users.name, users.phone 
FROM items 
JOIN users ON items.user_id = users.id;
```

**Get items with their images:**
```sql
SELECT items.title, item_images.image_url, item_images.is_primary
FROM items
LEFT JOIN item_images ON items.id = item_images.item_id;
```

---

## ðŸ“ˆ Next Steps

### Backend Integration (Coming Next)
- Connect Node.js to this database
- Create API endpoints for CRUD operations
- Implement authentication using password_hash
- Add location-based search using lat/lng

### Future Enhancements
- Add favorites/wishlist table
- Add reviews/ratings table
- Add notifications table
- Add search history table

---

## ðŸ‘¥ Team
- **Haroon Usman** (FA22-BSSE-097)
- **Muhammad Buraq** (FA22-BSSE-098)

## ðŸ“… Last Updated
November 24, 2024

---

**Status:** âœ… Complete and Ready for Backend Integration
```

---

## âœ… **Final Checklist (Ye Sab Complete Karo)**
```
â–¡ schema.sql file updated (MySQL version)
â–¡ seed.sql file updated (MySQL version)
â–¡ XAMPP started
â–¡ sharehub database created in PHPMyAdmin
â–¡ schema.sql imported successfully
â–¡ seed.sql imported successfully
â–¡ 6 tables verified in PHPMyAdmin
â–¡ 5 users visible in users table
â–¡ 10 items visible in items table
â–¡ DATABASE_DOCUMENTATION.md file created
â–¡ Screenshots taken:
  â–¡ Database structure screenshot
  â–¡ Users table data screenshot
  â–¡ Items table data screenshot
  â–¡ Folder structure screenshot
â–¡ All files saved properly